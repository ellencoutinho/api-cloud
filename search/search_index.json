{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Sobre o projeto","text":"<p>Esse \u00e9 o projeto individual da disciplina Computa\u00e7\u00e3o em nuvem, do 6\u00ba semestre de Engenharia de Computa\u00e7\u00e3o no Insper. Trata-se de uma estrutura de requisi\u00e7\u00e3o \u00e0 API, com autentica\u00e7\u00e3o, para obter o clima di\u00e1rio na cidade de S\u00e3o Paulo.</p> <p>Para isso, \u00e9 realizado web scrapping da p\u00e1gina de clima do G1, que se atualiza diariamente. Disso, retira-se as seguintes informa\u00e7\u00f5es:</p> <ol> <li>Data</li> <li>Descri\u00e7\u00e3o do clima</li> <li>Temperatura m\u00ednima</li> <li>Temperatura m\u00e1xima</li> </ol> <p>Tais informa\u00e7\u00f5es s\u00e3o retornadas pela API em um json, conforme demonstrado na aba \"Endpoints\". O funcionamento b\u00e1sico est\u00e1 exemplificado em um v\u00eddeo no YouTube</p> <p>Realizado pela aluna Ellen Coutinho Li\u00e3o da Silva.</p>"},{"location":"#passos-para-acessar-o-projeto","title":"Passos para acessar o projeto","text":"<ol> <li>Clonar e abrir o reposit\u00f3rio</li> <li>Executar <code>bash docker-compose up -d</code> na raiz do projeto</li> </ol>"},{"location":"#estrutura-de-arquivos","title":"Estrutura de arquivos","text":"<pre><code>app/   # Onde os servi\u00e7os est\u00e3o alocados\n    api.py # Fun\u00e7\u00f5es e classes que tratam as requisi\u00e7\u00f5es\n    scrapping.py # Fun\u00e7\u00e3o que realiza o WebScrapping\n    requirements.txt \n    Dockerfile\ndocs/ # Arquivos .md da documenta\u00e7\u00e3o do projeto\nsite/ # Arquivos de renderiza\u00e7\u00e3o da documenta\u00e7\u00e3o do projeto\ncompose.yaml\nmkdocs.yml\n</code></pre>"},{"location":"#tecnologias-utilizadas","title":"Tecnologias utilizadas","text":"<ul> <li>Docker</li> <li>Postgres</li> <li>FastAPI</li> <li>MKDocs</li> <li>Python</li> </ul>"},{"location":"#links-relevantes","title":"Links relevantes","text":"<ul> <li>C\u00f3digo fonte</li> <li>V\u00eddeo no YouTube</li> <li>Imagem no DockerHub</li> </ul>"},{"location":"AWS/","title":"Deploy dos servi\u00e7os no EKS da AWS","text":"<p>Foi realizado o deploy dos dois servi\u00e7os para o funcionamento da aplica\u00e7\u00e3o:</p> <ol> <li>Banco de Dados (PostgreSQL)</li> <li>API de Clima \u2014 A API fornece informa\u00e7\u00f5es sobre o clima atual, detalhada na se\u00e7\u00e3o Endpoints desse site. Ela pode ser acessada atrav\u00e9s da URL:</li> </ol> <pre><code>http://a9ec7415777414057a984d4103f0432e-374415893.us-east-1.elb.amazonaws.com:8000/docs\n</code></pre> <p>Clique aqui para acessar a API</p> <p>Clique aqui para visualizar o v\u00eddeo de demonstra\u00e7\u00e3o</p>"},{"location":"AWS/#tecnologia-utilizada","title":"Tecnologia Utilizada","text":"<p>Para realizar o deploy, foi utilizado o Elastic Kubernetes Service (EKS) e Kubernetes da AWS, onde cada servi\u00e7o foi implantado em um POD. A estrutura de rede tamb\u00e9m foi provida pela AWS, no servi\u00e7o de infraestrutura como c\u00f3digo, endere\u00e7ada no link.</p> <p>Abaixo est\u00e3o os arquivos de configura\u00e7\u00e3o que foram utilizados, os quais est\u00e3o tamb\u00e9m dispon\u00edveis no reposit\u00f3rio do projeto.</p>"},{"location":"AWS/#arquivos-de-configuracao","title":"Arquivos de Configura\u00e7\u00e3o","text":""},{"location":"AWS/#1-api-deploymentyaml","title":"1. api-deployment.yaml","text":"<p>Este arquivo configura o deploy da API que serve os dados sobre o clima.</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: api\n  template:\n    metadata:\n      labels:\n        app: api\n    spec:\n      containers:\n      - name: api-container\n        image: ellencoutinho/api-clima:v5\n        env:\n        - name: DB_USER\n          value: \"projeto\"\n        - name: DB_PASSWORD\n          value: \"projeto\"\n        - name: DB_HOST\n          value: \"db-service\"\n        - name: DB_NAME\n          value: \"projeto\"\n        - name: MINHA_SENHA\n          value: \"projeto\"\n        ports:\n        - containerPort: 8000\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: api-service\nspec:\n  selector:\n    app: api\n  ports:\n    - port: 8000\n      targetPort: 8000\n  type: LoadBalancer\n</code></pre>"},{"location":"AWS/#2-db-deploymentyaml","title":"2. db-deployment.yaml","text":"<p>Este arquivo configura o deploy do banco de dados PostgreSQL, que armazena as informa\u00e7\u00f5es necess\u00e1rias para a API.</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: db-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: db\n  template:\n    metadata:\n      labels:\n        app: db\n    spec:\n      containers:\n      - name: db-container\n        image: postgres:16\n        env:\n        - name: POSTGRES_DB\n          value: \"projeto\"\n        - name: POSTGRES_USER\n          value: \"projeto\"\n        - name: POSTGRES_PASSWORD\n          value: \"projeto\"\n        ports:\n        - containerPort: 5432\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: db-service\nspec:\n  selector:\n    app: db\n  ports:\n    - port: 5432\n      targetPort: 5432\n</code></pre>"},{"location":"docker/","title":"Docker","text":"<p>Os comandos executados dentro da pasta app, para gerar a imagem publicada no DockerHub, foram:</p> <ol> <li><code>bash docker login</code></li> <li><code>bash docker build -t ellencoutinho/api-clima:v5 .</code></li> <li><code>bash docker push ellencoutinho/api-clima:v5</code></li> </ol>"},{"location":"endpoints/","title":"Endpoints","text":"<p>A API possui suporte \u00e0 3 endpoints:</p> <ol> <li> <p>POST /registrar</p> <p>Atribui\u00e7\u00e3o de registrar um usu\u00e1rio na base de dados</p> <ul> <li> <p>Retorna 200 quando o registro criado com sucesso, com token JWT atribu\u00eddo no cadastro  </p> </li> <li> <p>Retorna 409 quando o email j\u00e1 foi registrado </p> </li> </ul> </li> <li> <p>POST /login</p> <p>Atribui\u00e7\u00e3o de gerar um token JWT (utilizado como modo de autentica\u00e7\u00e3o) somente aos usu\u00e1rios que j\u00e1 estiverem registrados na base de dados</p> <ul> <li> <p>Retorna 200 quando a autentica\u00e7\u00e3o foi bem sucedida  </p> </li> <li> <p>Retorna 401 quando parte das credenciais est\u00e3o inv\u00e1lidas </p> </li> </ul> </li> <li> <p>GET /consultar</p> <p>Atribui\u00e7\u00e3o de checar se o usu\u00e1rio a fazer a solicita\u00e7\u00e3o est\u00e1 autenticado, para assim fornecer as informa\u00e7\u00f5es do webscrapping. Isso significa observar se o token JWT contido no campo \"Authentication: Bearer\" do header da requisi\u00e7\u00e3o \u00e9 v\u00e1lido.</p> <ul> <li> <p>Retorna 200 quando a autentica\u00e7\u00e3o \u00e9 bem sucedida, ent\u00e3o retorna as informa\u00e7\u00f5es do clima </p> </li> <li> <p>Retorna 403 quando o token JWT submetido no header da requisi\u00e7\u00e3o n\u00e3o \u00e9 coerente com o token do login </p> </li> </ul> </li> </ol>"}]}